# ILAS - Интеллектуальная система посадки и обхода препятствий

**ILAS** (Intelligent Landing and Avoidance System) — это комплексная система обнаружения и обхода препятствий для дронов с вертикальным взлетом и посадкой (VTOL). Система обеспечивает интеллектуальные возможности посадки на обозначенные поверхности и поддерживает несколько платформ полетных контроллеров.

## Возможности

### Обнаружение препятствий
- Поддержка нескольких датчиков (лидар, камера, ультразвук, радар, глубинная камера)
- Обнаружение и отслеживание препятствий в реальном времени
- Настраиваемые дальность обнаружения и пороги уверенности
- Слияние данных с датчиков для повышения точности

### Обход препятствий
- Несколько стратегий обхода:
  - Метод искусственных потенциальных полей
  - Гистограмма векторного поля (VFH)
  - Динамический оконный подход (DWA)
  - Быстрорастущее случайное дерево (RRT)
- Настраиваемые запасы безопасности
- Планирование пути в реальном времени
- Обработка динамических препятствий

### Интеллектуальная посадка
- Автоматический анализ места посадки
- Оценка рельефа (уклон, неровности)
- Несколько режимов посадки:
  - Точная посадка на маркированные площадки
  - Посадка с анализом рельефа
  - Аварийная посадка
  - Вертикальное снижение
  - Посадка на склон
- Планирование траектории для безопасного подхода

### Поддержка контроллеров
- Полетный контроллер **PX4**
- Полетный контроллер **ArduPilot**
- **Режим симуляции** для тестирования
- Расширяемая архитектура для пользовательских контроллеров

## Установка

```bash
# Клонировать репозиторий
git clone https://github.com/AerotechRussia/ILAS.git
cd ILAS

# Установить зависимости
pip install -r requirements.txt
```

## Быстрый старт

### Базовое использование

```python
from ilas.core import ILASCore
from ilas.utils.config import get_default_config

# Инициализировать ILAS с конфигурацией по умолчанию
config = get_default_config()
ilas = ILASCore(config)

# Запустить систему
ilas.start()

# Навигация к цели с обходом препятствий
import numpy as np
target = np.array([10.0, 0.0, 5.0])
sensor_data = {}  # Добавьте свои данные с датчиков
nav_command, is_safe = ilas.navigate_to_target(target, sensor_data)

# Выполнить интеллектуальную посадку
landing_center = np.array([10.0, 0.0, 0.0])
success = ilas.execute_landing(landing_center, search_radius=10.0, sensor_data={})

# Остановить систему
ilas.stop()
```

### Интерфейс командной строки

```bash
# Запустить с конфигурацией по умолчанию
python main.py

# Запустить с пользовательской конфигурацией
python main.py --config config/config_px4.yaml

# Запустить миссию
python main.py --mode mission --mission examples/mission_example.yaml

# Запустить тестовый сценарий
python main.py --mode test
```

### Интерактивный режим

```bash
python main.py --mode interactive
```

Доступные команды:
- `status` - Показать статус системы
- `navigate` - Навигация к целевой позиции
- `land` - Выполнить интеллектуальную посадку
- `emergency` - Аварийная посадка
- `help` - Показать справку
- `quit` - Выйти

## Конфигурация

ILAS использует файлы конфигурации в формате YAML. Примеры смотрите в директории `config/`:

- `config_px4.yaml` - Конфигурация для контроллера PX4
- `config_ardupilot.yaml` - Конфигурация для ArduPilot
- `config_simulation.yaml` - Конфигурация для симуляции

### Структура конфигурации

```yaml
detection:
  detection_range: 20.0        # Дальность обнаружения в метрах
  min_confidence: 0.6           # Минимальный порог уверенности
  sensors:
    - type: lidar
      enabled: true
    - type: camera
      enabled: true

avoidance:
  strategy: potential_field     # Стратегия обхода
  safety_margin: 2.0            # Запас безопасности в метрах
  max_avoidance_distance: 10.0  # Максимальное расстояние обхода

landing:
  landing_mode: terrain         # Режим посадки
  min_landing_size: [2.0, 2.0]  # Минимальный размер площадки для посадки
  max_slope: 15.0               # Максимальный уклон в градусах
  hover_height: 2.0             # Высота зависания перед посадкой

controller:
  controller_type: px4          # Тип контроллера
  connection_string: /dev/ttyUSB0
  baud_rate: 57600
```

## Примеры

Смотрите директорию `examples/`:

- `basic_usage.py` - Примеры базового использования
- `mission_example.yaml` - Пример конфигурации миссии

Запуск примеров:
```bash
python examples/basic_usage.py
```

## Архитектура

```
ILAS/
├── ilas/
│   ├── detection/           # Модули обнаружения препятствий
│   │   └── obstacle_detector.py
│   ├── avoidance/           # Алгоритмы обхода
│   │   └── avoidance_system.py
│   ├── landing/             # Система посадки
│   │   └── intelligent_landing.py
│   ├── controllers/         # Интерфейсы полетных контроллеров
│   │   └── controller_manager.py
│   ├── utils/               # Утилиты
│   │   ├── config.py
│   │   └── visualization.py
│   └── core.py              # Основной модуль интеграции
├── config/                  # Файлы конфигурации
├── examples/                # Примеры использования
├── tests/                   # Набор тестов
├── main.py                  # Основная точка входа
├── requirements.txt         # Зависимости
└── LICENSE                  # Проприетарная лицензия
```

## Системные требования

- Python 3.7+
- NumPy
- SciPy
- OpenCV (для поддержки камеры)
- PyMAVLink (для поддержки PX4/ArduPilot)
- DroneKit (опционально, для расширенной поддержки MAVLink)

## Поддерживаемое оборудование

### Полетные контроллеры
- PX4 (через MAVLink)
- ArduPilot (через MAVLink)
- DJI (через SDK)
- Пользовательские контроллеры (расширяемые)

### Датчики
- Лидар (облако точек)
- Камеры (RGB, глубина)
- Ультразвуковые датчики
- Радар
- Слияние данных с нескольких датчиков

### Платформы
- Мультироторные дроны
- Аппараты с вертикальным взлетом и посадкой (VTOL)
- Самолеты с возможностью VTOL

## Лицензия

Copyright (c) 2025 AerotechRussia. Все права защищены.

Это программное обеспечение является проприетарным и конфиденциальным. Оно предоставляется **ТОЛЬКО ДЛЯ ОЗНАКОМЛЕНИЯ**.

Смотрите файл [LICENSE](LICENSE) для полных условий лицензии.

**ОГРАНИЧЕНИЯ:**
- Запрещено использование, копирование, изменение или распространение
- Обратная разработка строго запрещена
- Только для ознакомления - выполнение или развертывание запрещено

По вопросам лицензирования обращайтесь: AerotechRussia

## Уведомление о безопасности

 **ВАЖНОЕ УВЕДОМЛЕНИЕ О БЕЗОПАСНОСТИ**

Это автономная система полета. Всегда:
- Сначала тестируйте в симуляции
- Соблюдайте местные авиационные правила
- Сохраняйте возможность ручного управления
- Контролируйте систему во время работы
- Обеспечивайте достаточные запасы безопасности
- Имейте план действий в чрезвычайных ситуациях
- Никогда не летайте над людьми или в запрещенных зонах

Разработчики не несут ответственности за неправильное использование или несчастные случаи.

## Поддержка

По вопросам и для получения поддержки, пожалуйста, обращайтесь в AerotechRussia.

**Примечание:** Это проприетарное программное обеспечение. Поддержка предоставляется только лицензированным пользователям.

## Версия

Текущая версия: 1.0.0

## Статус разработки

- ✅ Основная система обнаружения препятствий
- ✅ Несколько алгоритмов обхода
- ✅ Интеллектуальная система посадки
- ✅ Поддержка нескольких контроллеров
- ✅ Система конфигурации
- ✅ Интерфейс командной строки
- ✅ Документация

---

**Copyright (c) 2025 AerotechRussia. Все права защищены.**
